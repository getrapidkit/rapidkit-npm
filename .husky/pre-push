#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-push validation..."

# Run Prettier format check
echo "  â†’ Checking code formatting..."
npm run format:check || {
  echo "âŒ Code formatting issues found. Run 'npm run format' to fix."
  exit 1
}

# Run ESLint (errors only)
echo "  â†’ Checking for lint errors..."
npm run lint -- --quiet || {
  echo "âŒ Lint errors found. Fix them before pushing."
  exit 1
}

# Run TypeScript type checking
echo "  â†’ Running type checks..."
npm run typecheck || {
  echo "âŒ Type check failed. Fix type errors before pushing."
  exit 1
}

# Run tests
echo "  â†’ Running tests..."
npm test || {
  echo "âŒ Tests failed. Fix failing tests before pushing."
  exit 1
}

echo "âœ… All pre-push checks passed!"
